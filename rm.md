El comando `rm` es tu **eliminador** de archivos y directorios. Es una herramienta poderosa pero peligrosa: una vez que eliminas algo con `rm`, **no hay papelera de reciclaje**. Los archivos se borran permanentemente del sistema.

---
### ¬øQu√© Hace RM? üóëÔ∏è
**RM** significa **"Remove"** (Eliminar). Su funci√≥n es eliminar archivos y directorios del sistema de archivos de forma permanente.

‚ö†Ô∏è **ADVERTENCIA CR√çTICA**: `rm` elimina archivos PERMANENTEMENTE. No hay funci√≥n "deshacer".

### Sintaxis B√°sica
```bash
rm [opciones] archivo(s)
rm [opciones] directorio(s)
```

### Eliminar Archivos B√°sico
```bash
# Eliminar un archivo
rm archivo.txt

# Eliminar m√∫ltiples archivos
rm archivo1.txt archivo2.txt archivo3.txt

# Eliminar archivos con patr√≥n
rm *.tmp
rm backup_*
rm archivo?.txt    # archivo1.txt, archivo2.txt, etc.
```

### En el Contexto de la Instalaci√≥n de Arch Linux

#### **Limpieza Post-Instalaci√≥n**
```bash
# Eliminar archivos temporales de instalaci√≥n
rm /tmp/arch-install.log
rm /tmp/*.tmp
rm /var/cache/pacman/pkg/*.pkg.tar.xz.old

# Limpiar descargas de paquetes
rm ~/archiso-*.iso
rm ~/firmware-*.tar.gz
```

#### **Limpiar Configuraciones de Prueba**
```bash
# Eliminar configuraciones experimentales
rm ~/.config/test-config.conf
rm /etc/systemd/system/experimental.service
rm ~/.bashrc.testing
```

#### **Mantenimiento del Sistema**
```bash
# Limpiar logs antiguos
rm /var/log/*.log.old
rm ~/.cache/*/*.log

# Eliminar archivos de backup autom√°tico
rm ~/.vimrc~
rm ~/.bashrc.bak
```

#### **Liberar Espacio en Disco**
```bash
# Limpiar cach√© de aplicaciones
rm -rf ~/.cache/thumbnails/*
rm ~/.local/share/Trash/files/*
rm /tmp/*
```

### Opciones Cr√≠ticas de Seguridad

#### **`-i` (Interactive) - SIEMPRE RECOMENDADO**
```bash
# Pregunta antes de eliminar cada archivo
rm -i archivo.txt
# rm: ¬øeliminar archivo regular 'archivo.txt'? (y/n)

# Especialmente importante con patrones
rm -i *.txt
```

#### **`-I` (Interactive-once) - Para M√∫ltiples Archivos**
```bash
# Pregunta una vez si hay m√°s de 3 archivos
rm -I *.log
# rm: ¬øeliminar 15 argumentos? (y/n)
```

#### **`-f` (Force) - ‚ö†Ô∏è PELIGROSO**
```bash
# Elimina sin preguntar, incluso archivos protegidos
rm -f archivo_protegido.txt

# ‚ö†Ô∏è NUNCA uses: rm -rf / 
# ‚ö†Ô∏è Esto eliminar√≠a TODO el sistema
```

### Trabajar con Directorios

#### **`-r` o `-R` (Recursive) - Para Directorios**
```bash
# Eliminar directorio vac√≠o (tambi√©n funciona rmdir)
rm -r directorio_vacio/

# Eliminar directorio con contenido
rm -r directorio_con_archivos/

# Eliminar m√∫ltiples directorios
rm -r dir1/ dir2/ dir3/
```

#### **Combinaci√≥n Com√∫n (¬°PELIGROSA!)**
```bash
# ‚ö†Ô∏è EXTREMADAMENTE PELIGROSO
rm -rf directorio/          # Elimina recursivamente, sin preguntar

# ‚úÖ VERSI√ìN SEGURA
rm -ri directorio/          # Elimina recursivamente, preguntando
```

### Eliminar Archivos Espec√≠ficos

#### **Por Tipo de Archivo**
```bash
# Eliminar archivos temporales
rm *.tmp *.temp *.cache

# Eliminar archivos de backup
rm *.bak *.backup *~

# Eliminar archivos compilados
rm *.o *.obj *.class

# Eliminar archivos de log
rm *.log *.log.*
```

#### **Por Antig√ºedad (con find)**
```bash
# Eliminar archivos m√°s antiguos de 30 d√≠as
find /tmp -type f -mtime +30 -exec rm {} \;

# Eliminar archivos m√°s antiguos de 7 d√≠as en descargas
find ~/Descargas -type f -mtime +7 -exec rm -i {} \;
```

#### **Por Tama√±o**
```bash
# Eliminar archivos grandes (m√°s de 100MB)
find . -type f -size +100M -exec rm -i {} \;

# Eliminar archivos vac√≠os
find . -type f -empty -delete
```

### Casos de Uso Espec√≠ficos en Arch Linux

#### **1. Limpiar Cach√© de Pacman**
```bash
# Eliminar paquetes antiguos del cach√©
sudo pacman -Sc                      # Limpieza est√°ndar
rm /var/cache/pacman/pkg/*.pkg.tar.xz.old

# Limpiar completamente (cuidado)
sudo pacman -Scc                     # Elimina TODO el cach√©
```

#### **2. Eliminar Kernels Antiguos**
```bash
# Listar kernels instalados
ls /boot/vmlinuz-*

# Eliminar kernel espec√≠fico (cuidado)
sudo rm /boot/vmlinuz-linux-lts-old
sudo rm /boot/initramfs-linux-lts-old.img
```

#### **3. Limpiar Configuraciones Hu√©rfanas**
```bash
# Eliminar configuraciones de paquetes desinstalados
find ~/.config -name "*app-desinstalada*" -exec rm -ri {} \;

# Limpiar enlaces simb√≥licos rotos
find /usr/bin -type l ! -exec test -e {} \; -exec rm {} \;
```

#### **4. Eliminar Archivos de Instalaci√≥n**
```bash
# Despu√©s de instalaci√≥n exitosa
rm ~/archiso-latest.iso
rm -r ~/arch-installation-scripts/
rm /tmp/arch-install-*
```

### Patrones Avanzados de Eliminaci√≥n

#### **Eliminar Excepto Ciertos Archivos**
```bash
# Eliminar todo excepto archivos espec√≠ficos
rm !(importante.txt|config.conf)

# Usando find para mayor control
find . -type f ! -name "importante.txt" ! -name "*.conf" -delete
```

#### **Eliminar Archivos con Nombres Especiales**
```bash
# Archivos que empiezan con gui√≥n
rm -- -archivo-extra√±o.txt
rm ./-archivo-con-guion.txt

# Archivos con espacios
rm "archivo con espacios.txt"
rm archivo\ con\ espacios.txt
```

#### **Eliminar Archivos Ocultos**
```bash
# Eliminar archivos ocultos espec√≠ficos
rm .archivo_oculto

# Eliminar todos los archivos ocultos (CUIDADO)
rm .*                    # ‚ö†Ô∏è Incluye . y .. (problem√°tico)
rm .[^.]*               # ‚úÖ Mejor: excluye . y ..
```

### Seguridad y Recuperaci√≥n

#### **Crear Funci√≥n RM Segura (Recomendado)**
```bash
# Agregar a ~/.bashrc
alias rm='rm -i'                    # Siempre pregunta
alias rmd='rm -ri'                  # Para directorios

# Funci√≥n que mueve a "papelera" en lugar de eliminar
trash() {
    mkdir -p ~/.local/share/Trash/files
    mv "$@" ~/.local/share/Trash/files/
}
```

#### **Backup Antes de Eliminar**
```bash
# Funci√≥n segura que hace backup
safe_rm() {
    mkdir -p ~/rm_backup/$(date +%Y%m%d)
    cp -r "$@" ~/rm_backup/$(date +%Y%m%d)/
    rm -ri "$@"
}
```

#### **Verificar Antes de Eliminar**
```bash
# Ver qu√© se va a eliminar
ls -la archivo*                     # Ver archivos que coinciden
find . -name "*.tmp" -ls            # Ver archivos temporales

# Contar archivos antes de eliminar
ls *.log | wc -l                    # ¬øCu√°ntos logs hay?
```

### Recuperaci√≥n de Archivos Eliminados

#### **Herramientas de Recuperaci√≥n**
```bash
# Instalar herramientas de recuperaci√≥n
sudo pacman -S testdisk photorec

# Usar extundelete para ext4
sudo pacman -S extundelete
sudo extundelete /dev/sda1 --restore-file archivo_eliminado.txt

# Para archivos reci√©n eliminados, detener escritura inmediatamente
sudo sync                           # Sincronizar buffers
sudo mount -o remount,ro /          # Montar como solo lectura
```

#### **Prevenci√≥n de P√©rdida de Datos**
```bash
# Configurar snapshots con Btrfs
sudo pacman -S snapper
sudo snapper create-config /

# Usar timeshift para backups autom√°ticos
sudo pacman -S timeshift
```

### Comandos Peligrosos a EVITAR

‚ùå **NUNCA ejecutes estos comandos:**
```bash
rm -rf /                            # Elimina TODO el sistema
rm -rf /*                           # Elimina todo en la ra√≠z
rm -rf $HOME                        # Elimina tu directorio personal
rm -rf ~/.                          # Elimina archivos de configuraci√≥n
sudo rm -rf /*                      # Destrucci√≥n total con permisos de root
```

‚ùå **Variables peligrosas:**
```bash
# Si $VAR est√° vac√≠a, esto se convierte en "rm -rf /"
rm -rf $VAR/                        # ‚ö†Ô∏è Verificar variable primero

# ‚úÖ Versi√≥n segura:
if [ -n "$VAR" ] && [ -d "$VAR" ]; then
    rm -rf "$VAR/"
fi
```

### Errores Comunes y Soluciones

‚ùå **Error: Archivo protegido contra escritura**
```bash
rm archivo_protegido.txt
# rm: cannot remove 'archivo_protegido.txt': Permission denied
```
‚úÖ **Soluci√≥n:**
```bash
chmod +w archivo_protegido.txt && rm archivo_protegido.txt
# O usar force (cuidado):
rm -f archivo_protegido.txt
```

‚ùå **Error: Directorio no vac√≠o**
```bash
rm directorio/
# rm: cannot remove 'directorio/': Is a directory
```
‚úÖ **Soluci√≥n:**
```bash
rm -r directorio/                   # Para directorios con contenido
rmdir directorio/                   # Solo para directorios vac√≠os
```

‚ùå **Error: Archivo en uso**
```bash
rm archivo_en_uso.log
# rm: cannot remove 'archivo_en_uso.log': Device or resource busy
```
‚úÖ **Soluci√≥n:**
```bash
lsof archivo_en_uso.log            # Ver qu√© proceso lo usa
# Cerrar el proceso o:
sudo fuser -k archivo_en_uso.log   # Terminar procesos que lo usan
```

### Alternativas M√°s Seguras

#### **1. Usar Papelera de Reciclaje**
```bash
# Instalar trash-cli
sudo pacman -S trash-cli

# Usar en lugar de rm
trash archivo.txt                   # Mueve a papelera
trash-list                          # Ver archivos en papelera
trash-restore                       # Restaurar archivos
trash-empty                         # Vaciar papelera
```

#### **2. Mover en Lugar de Eliminar**
```bash
# Crear directorio de "eliminados"
mkdir -p ~/.deleted/$(date +%Y%m%d)

# Mover en lugar de eliminar
mv archivo_viejo.txt ~/.deleted/$(date +%Y%m%d)/
```

#### **3. Usar Herramientas de Backup**
```bash
# rsync con --backup-dir
rsync -av --backup-dir=~/backup/ origen/ destino/

# cp con backup autom√°tico
cp --backup=numbered archivo.txt archivo.txt.backup
```

### Buenas Pr√°cticas

#### **1. SIEMPRE usar -i en scripts importantes**
```bash
#!/bin/bash
# En scripts, usar confirmaci√≥n
rm -i "$file_to_delete"
```

#### **2. Verificar antes de ejecutar**
```bash
# Ver qu√© archivos se eliminar√≠an
ls *.tmp                           # Ver archivos primero
read -p "¬øEliminar estos archivos? (y/n): " -n 1 -r
echo
if [[ $REPLY =~ ^[Yy]$ ]]; then
    rm *.tmp
fi
```

#### **3. Usar aliases de seguridad**
```bash
# En ~/.bashrc
alias rm='rm -i'
alias del='rm -i'
alias remove='rm -ri'

# Para expertos que quieren fuerza real
alias rmf='command rm -f'
alias rmrf='command rm -rf'
```

#### **4. Documentar eliminaciones importantes**
```bash
# Crear log de eliminaciones importantes
echo "$(date): Elimin√© directorio $DIR" >> ~/.rm_log
rm -rf "$DIR"
```

---
### Enlaces Relacionados
- [[mv]] - Mover archivos (alternativa a eliminar + recrear)
- [[cp]] - Hacer copias antes de eliminar
- [[ls]] - Verificar archivos antes de eliminar
- [[find]] - Encontrar archivos para eliminar en lote
- [[chmod]] - Cambiar permisos antes de eliminar


